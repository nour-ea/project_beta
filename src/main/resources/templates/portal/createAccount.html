<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Create Account</title>
<th:block th:include="/includes/_include"></th:block>

<!-- angular js app -->
<script	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular.js"></script>
<script th:src="@{/apps/account.js}"></script>

</head>

<body ng-app="AccountManagement" ng-controller="CreateAccountController">
	<th:block th:include="/portal/_header"></th:block>
	
	<section class="container-fluid p-3 bg-welcome">

		<div class="col-md-4 mx-auto p-3 bg-white rounded">
		     
		 <div class="">
	         <h4 class="mx-auto">Create a new account </h4>
	         <br>            
	     </div>
	     
	     
	     <form name="userForm" ng-submit="createAccount()" novalidate>

            <div class="form-group form-row">
	          <div class="col-md-6" >
	            <input type="text" name="firstName" class="form-control" placeholder="First name" ng-model="accountForm.firstName" ng-class="{ 'is-invalid' : userForm.firstName.$invalid && !userForm.firstName.$pristine }" required>
	            <small ng-show="userForm.firstName.$invalid && !userForm.firstName.$pristine" class="text-danger"> &nbsp your First name is required </small>
   	          </div>

	          <div class="col-md-6" >
	            <input type="text" name="lastName" class="form-control" placeholder="Last name" ng-model="accountForm.lastName" ng-class="{ 'is-invalid' : userForm.lastName.$invalid && !userForm.lastName.$pristine }" required>
	            <small ng-show="userForm.lastName.$invalid && !userForm.lastName.$pristine" class="text-danger"> &nbsp your last name is required </small>
   	          </div>
			</div>
	      
	        <div class="form-group" >
	            <input type="email" name="userName" class="form-control" placeholder="Email address" ng-model="accountForm.userName" ng-class="{ 'is-invalid' : userForm.userName.$invalid && !userForm.userName.$pristine }" required>
	            <small ng-show="userForm.userName.$invalid && !userForm.userName.$pristine && (userForm.userName.$error.email || userForm.userName.$error.required) " class="text-danger"> &nbsp please enter a valid email </small>
 	            <small ng-show="userForm.userName.$invalid && !userForm.userName.$pristine && userForm.userName.$error.alreadyUsed" class="text-danger"> &nbsp sorry this email is already used </small>
	        </div>

	        <div class="form-group" >
	            <input type="password" name="password" class="form-control" placeholder="Password" ng-model="accountForm.password" ng-minlength="8" ng-maxlength="20" ng-pattern="/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])/" ng-class="{ 'is-invalid' : userForm.password.$invalid && !userForm.password.$pristine }" required>
	            <small ng-show="userForm.password.$error.required && !userForm.password.$pristine" class="text-danger">&nbsp a password is required </small>
			    <small ng-show="!userForm.password.$error.required && !userForm.password.$error.minlength && !userForm.password.$error.maxlength && userForm.password.$error.pattern && !userForm.password.$pristine" class="text-danger">&nbsp must contain one lower &amp; uppercase letter, and one number </small>
			    <small ng-show="!userForm.password.$error.required && (userForm.password.$error.minlength || userForm.password.$error.maxlength) && !userForm.password.$pristine" class="text-danger">&nbsp password must be between 8 and 20 characters </small>
	        </div>
	        
	        	<div class="form-group" >
	            <input type="password" name="confirmPassword" class="form-control" placeholder="Confirm password" ng-model="accountForm.confirmPassword" ng-class="{ 'is-invalid' : userForm.confirmPassword.$invalid && !userForm.confirmPassword.$pristine }" match-password="userForm.password" required>
	            <small ng-show="userForm.confirmPassword.$error.required && !userForm.confirmPassword.$pristine" class="text-danger"> &nbsp please confirm your password </small>
	            <small ng-show="!userForm.confirmPassword.$error.required && userForm.confirmPassword.$error.matchPassword && !userForm.confirmPassword.$pristine" class="text-danger">&nbsp passwords should match.</small>
	        </div>

			<div class="form-group">
			    <div class="form-check">
			      <input type="checkbox" name="conditionsAccepted" class="form-check-input" ng-model="accountForm.conditionsAccepted" ng-class="{ 'is-invalid' : userForm.conditionsAccepted.$invalid && !userForm.conditionsAccepted.$pristine }" required>
			      <label class="form-check-label"> I agree with the <a href=""> terms and conditions </a> </label>
			      <br>
		          <small ng-show="userForm.conditionsAccepted.$invalid && !userForm.conditionsAccepted.$pristine" class="text-danger"> &nbsp you must accept the terms and conditions </small>
			    </div>
			</div>
	        
			<div class="form-group mt-2">
				<button type="submit" class="btn btn-primary" ng-disabled="userForm.$invalid" >Create Account</button>		
	         <hr>	         
	         or, <a href="/login">Login with your account</a>			
			</div>
			
		 </form>
		 </div> 
		
	     
	     
	</section>

	<th:block th:include="/portal/_footer"></th:block>

</body>
</html>