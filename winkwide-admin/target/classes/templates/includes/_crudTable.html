
	<!-- DATA TABLE -->
	<div class="row m-2 rounded bg-light" id="tableRow">
		<div class="m-4 w-100" style="font-size: 12px">
			<div id="crudTable">
				<div ui-grid="mainGrid" class="grid" ui-grid-pagination ui-grid-selection ui-grid-exporter ui-grid-pinning></div>
			</div>

		</div>
	</div>


	<!-- CREATE / EDIT an object modal -->
	<div class="modal fade" id="createEditObjectModal" tabindex="-1">
		<div class="modal-dialog modal-lg" >
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="createEditObjectModalLabel">{{isCreateModalType ? 'Create '+targetObject : 'Edit '+targetObject}}</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				
				<form id="objectForm" name="objectForm" class="m-2">
				<div id="createEditObjectModalBody" class="modal-body m-1 p-1">		
										
						<!-- AUTOMATIC form fields for each object -->
						<!-- ------------------------------------- -->
						
						<div ng-repeat="field in schema" 
							 ng-if="targetObject!='media' && targetObject!='account' && targetObject!='bill'
							 		&& field.name!='id'
									&& !(targetObject=='display' && field.name=='lastSyncTime')
									&& !(targetObject=='playlist' && field.name=='duration')"
							 class="form-group row">
						 
						    <label ng-if="['String','boolean', 'int', 'Long', 'Double', 'BigDecimal', 'Date', 'LocalTime'].includes(field.type)"
						    		class="col-sm-3 col-form-label">{{field.title}} <span ng-if="field.optional">(optional)</span></label>
						    
						    <!-- case of a Textfield-->
						    <div ng-if="field.type=='String' 
						    				&& !(targetObject=='display' && field.name=='category')
						    				&& !(targetObject=='display' && field.name=='area')" 
						    	class="col-sm-9">
								<input type="text" class="form-control" name="{{field.name}}" ng-model="formData[field.name]" ng-class="{ 'is-invalid' : objectForm[field.name].$invalid && !objectForm[field.name].$pristine }" required>
								<small ng-show="objectForm[field.name].$invalid && !objectForm[field.name].$pristine  && objectForm[field.name].$viewValue==''" class="text-danger"> &nbsp field {{field.title}} is required </small>
								<small id="{{field.name+'InvalidMessage'}}" ng-show="objectForm[field.name].$invalid && !objectForm[field.name].$pristine" class="text-danger"></small>																
							</div>
							
							
							<!-- case of a Boolean -->
						    <div ng-if="field.type=='boolean'" class="col-sm-9">
								<select type="text" class="form-control" name="{{field.name}}" ng-model="formData[field.name]" required>
									<option value="true" ng-selected="formData[field.name] == true">true</option>
									<option value="false" ng-selected="formData[field.name] == false">false</option>
								</select>
								<small ng-show="objectForm[field.name].$invalid && !objectForm[field.name].$pristine" class="text-danger"> &nbsp field {{field.title}} is required </small>
							</div> 
							
							<!-- case of a Number -->
						    <div ng-if="field.type=='int' || field.type=='Long'" class="col-sm-9">
								<input type="text" class="form-control" name="{{field.name}}" ng-model="formData[field.name]" ng-pattern="/^[0-9]*$/" ng-class="{ 'is-invalid' : objectForm[field.name].$invalid && !objectForm[field.name].$pristine }" ng-required="field.optional">
								<small ng-show="objectForm[field.name].$error.required && !objectForm[field.name].$pristine" class="text-danger"> &nbsp field {{field.title}} is required </small>
								<small ng-show="!objectForm[field.name].$error.required  && objectForm[field.name].$error.pattern && !objectForm[field.name].$pristine" class="text-danger">&nbsp field {{field.title}} must be a number </small>				
							</div>
							
							<!-- case of a Decimal -->
						    <div ng-if="field.type=='Double' || field.type=='BigDecimal' " class="col-sm-9">
								<input type="text" class="form-control" name="{{field.name}}" ng-model="formData[field.name]" ng-pattern="/^[0-9]{1,7}(\.[0-9]+)?$/" ng-class="{ 'is-invalid' : objectForm[field.name].$invalid && !objectForm[field.name].$pristine }" ng-required="field.optional">
								<small ng-show="objectForm[field.name].$error.required && !objectForm[field.name].$pristine" class="text-danger"> &nbsp field {{field.title}} is required </small>
								<small ng-show="!objectForm[field.name].$error.required  && objectForm[field.name].$error.pattern && !objectForm[field.name].$pristine" class="text-danger">&nbsp field {{field.title}} must be a decimal </small>				
							</div>
																			
							<!-- case of a Date -->
						    <div ng-if="field.type=='Date'" class="col-sm-9 input-append date form_datetime row">
								<div class="col-sm-10 pr-0">
								<input type="text" name="{{field.name}}" class="form-control form-control-sm small mt-1 " readonly  placeholder="yyyy-mm-dd hh:mm" ng-model="formData[field.name]" required>
								</div>
								<div class="col-sm-2 p-1">
									<div class="mt-1">
										<span class="add-on"><i class="icon-remove fa fa-remove"></i></span>
    									<span class="add-on"><i class="icon-calendar fa fa-calendar"></i></span>
									</div>
    							</div>
																										
						 	</div>
						 	
						 	<!-- case of a LocalTime -->
						    <div ng-if="field.type=='LocalTime'" class="col-sm-9">
								<input type="text" class="form-control form-control-sm small mt-1" name="{{field.name}}" ng-model="formData[field.name]" placeholder="hh:mm" ng-class="{ 'is-invalid' : objectForm[field.name].$invalid && !objectForm[field.name].$pristine }" ng-pattern="/^((2[0-3]|[0-1]?[0-9]):([0-5][0-9]):([0-5][0-9]))$/" required>
								<small ng-show="objectForm[field.name].$error.required && !objectForm[field.name].$pristine" class="text-danger"> &nbsp field {{field.title}} is required </small>
								<small ng-show="!objectForm[field.name].$error.required  && objectForm[field.name].$error.pattern && !objectForm[field.name].$pristine" class="text-danger">&nbsp field {{field.title}} must be in a 24h "hh:mm" format </small>
						 	</div>
						 	
						 	<!-- Exceptions : case of a Settings List (DisplayCategory, Area...) -->
						 	<div ng-if="targetObject=='display' && field.name=='category'" class="col-sm-9" >
								<select type="text" class="form-control" name="category" ng-model="formData.category" ng-class="{ 'is-invalid' : objectForm.category.$invalid && !objectForm.category.$pristine }" required>
									<option ng-repeat="category in displayCategories" ng-value="category.name" ng-selected="formData.category==category.name">{{category.name}}</option>
								</select>
								<small ng-show="objectForm[field.name].$invalid && !objectForm[field.name].$pristine  && objectForm[field.name].$viewValue==''" class="text-danger"> &nbsp field {{field.title}} is required </small>
								<small id="{{field.name+'InvalidMessage'}}" ng-show="objectForm[field.name].$invalid && !objectForm[field.name].$pristine" class="text-danger"></small>																
							</div>
							
							<div ng-if="targetObject=='display' && field.name=='area'" class="col-sm-9" >
								<select type="text" class="form-control" name="area" ng-model="formData.area" ng-class="{ 'is-invalid' : objectForm.area.$invalid && !objectForm.area.$pristine }" required>
									<option ng-repeat="area in areas" ng-value="area.name+' ('+area.city+')'" ng-selected="formData.area==area.name+' ('+area.city+')'">{{area.name+' ('+area.city+')'}}</option>
								</select>
								<small ng-show="objectForm[field.name].$invalid && !objectForm[field.name].$pristine  && objectForm[field.name].$viewValue==''" class="text-danger"> &nbsp field {{field.title}} is required </small>
								<small id="{{field.name+'InvalidMessage'}}" ng-show="objectForm[field.name].$invalid && !objectForm[field.name].$pristine" class="text-danger"></small>																
							</div>
							
						 	
						 	
						</div>

						<!-- add COMPLEX SCHEMA RELATED specific form fields here -->
						<!-- -------------------------------------------- -->
						
						
						<!-- case of a Playlist -->
						<div ng-repeat="field in schema" ng-if="targetObject=='playlist'">
							<div  ng-if="field.name=='spots'" >
								<div  class="form-group row" >
									 <label  class="col-sm-4 col-form-label">Available Verified Medias</label>
								</div>
								<div  class="form-group row" >
									 <div class="col-sm-12">
									 	<div ui-grid="mediasGrid" class="grid small" ui-grid-pagination ui-grid-selection  ></div>						 		
									 </div>
								</div>
								<div  class="form-group row " >
									 <div class="w-100 d-flex justify-content-center">
									 	<button id="mediasGridRemoveButton" ng-click="removeSelectedObjects('medias', selectedSpotsGridApi, selectedSpotsGrid)" class="btn btn-sm btn-primary m-1" ><i class="fa fa-arrow-up fa-fw"></i></button>
									 	<button id="mediasGridAddButton" ng-click="addSelectedObjects('medias', mediasGridApi, selectedSpotsGrid)" class="btn btn-sm btn-primary m-1" ><i class="fa fa-arrow-down fa-fw"></i></button>
									 </div>
								</div>
								<div  class="form-group row" >
									 <label  class="col-sm-3 col-form-label">Selected Spots</label>
								</div>
								<div  class="form-group row" >
									 <div class="col-sm-12">
									 	<div ui-grid="selectedSpotsGrid" class="grid small" ui-grid-pagination ui-grid-selection ui-grid-edit ></div>						 		
									 </div>
								</div>
							</div>						
						</div>
						
						<!-- case of a Program -->
						<div ng-repeat="field in schema" ng-if="targetObject=='program'">
							<div  ng-if="field.name=='displays'">
								<div  class="form-group row" >
									 <label class="col-sm-3 col-form-label">Available Displays</label>
								</div>
								<div  class="form-group row" >
									 <div class="col-sm-12">
									 	<div ui-grid="displaysGrid" class="grid small" ui-grid-pagination ui-grid-selection ></div>						 		
									 </div>
							 	</div>
							 	<div  class="form-group row" >
									 <div class="w-100 d-flex justify-content-center">
									 	<button id="displaysGridRemoveButton" ng-click="removeSelectedObjects('displays', selectedDisplaysGridApi, selectedDisplaysGrid)" class="btn btn-sm btn-primary m-1" ><i class="fa fa-arrow-up fa-fw"></i></button>
									 	<button id="displaysGridAddButton" ng-click="addSelectedObjects('displays', displaysGridApi, selectedDisplaysGrid)" class="btn btn-sm btn-primary m-1" ><i class="fa fa-arrow-down fa-fw"></i></button>
									 </div>
								</div>
								<div  class="form-group row" >
									 <label class="col-sm-3 col-form-label">Selected Displays</label>
								</div>
								<div  class="form-group row" >
									 <div class="col-sm-12">
									 	<div ui-grid="selectedDisplaysGrid" class="grid small" ui-grid-pagination ui-grid-selection ></div>						 		
									 </div>
								</div>
							</div>						
							
							<div  ng-if="field.name=='playlists'">
								<div  class="form-group row" >		 	
									 <label class="col-sm-3 col-form-label">Available Playlists</label>
								</div>
								<div  class="form-group row" >
									 <div class="col-sm-12">
									 	<div ui-grid="playlistsGrid" class="grid small" ui-grid-pagination ui-grid-selection ></div>						 		
									 </div>
								</div>
								<div  class="form-group row" >
									 <div class="w-100 d-flex justify-content-center">
									 	<button id="playlistsGridRemoveButton" ng-click="removeSelectedObjects('playlists', selectedPlaylistsGridApi, selectedPlaylistsGrid)" class="btn btn-sm btn-primary m-1" ><i class="fa fa-arrow-up fa-fw"></i></button>
										<button id="playlistsGridAddButton" ng-click="addSelectedObjects('playlists', playlistsGridApi, selectedPlaylistsGrid)" class="btn btn-sm btn-primary m-1" ><i class="fa fa-arrow-down fa-fw"></i></button>						 									 		
									 </div>
								</div>
								<div  class="form-group row" >
									 <label class="col-sm-3 col-form-label">Selected Playlists</label>
								</div>
								<div  class="form-group row" >
									 <div class="col-sm-12">
									 	<div ui-grid="selectedPlaylistsGrid" class="grid small" ui-grid-pagination ui-grid-selection ></div>						 		
									 </div>				 	
								</div>
							</div>
						</div>
						
						<!-- add MANUALLY SET specific form fields here -->
						<!-- ------------------------------------------ -->
						
						<!-- case of a Media -->
						<div ng-if="targetObject=='media'">
						
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">File</label>
							    <div class="col-sm-9">
									<input type="file" class="form-control" name="file" id="file" onchange="angular.element(this).scope().previewFile(this)"  ng-class="{ 'is-invalid' : objectForm.file.$invalid && !objectForm.file.$pristine }">
									<small ng-show="objectForm.file.$invalid && !objectForm.file.$pristine" class="text-danger"> &nbsp field Media File is required </small>
									<small id="fileInvalidMessage" ng-show="objectForm.file.$invalid && !objectForm.file.$pristine" class="text-danger"></small>
									
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-3 col-form-label">Preview</label>
							</div>
							<div class="form-group row">
							    <div class="col-sm-12">
									<img id="imagePreview" ng-src="{{formData.type=='Image' ? formData.url :''}}" onload="angular.element(this).scope().generateThumbFile(this)" alt="Image Preview" class="w-100 d-none">
									<video id="videoPreview" ng-src="{{formData.type=='Video' ? formData.url :''}}" ontimeupdate="angular.element(this).scope().generateThumbFile(this)" alt="Video Preview" class="w-100 d-none" controls></video>
									<audio id="audioPreview" ng-src="{{formData.type=='Audio' ? formData.url :''}}" alt="Audio Preview" class="w-100 d-none" controls></audio>
									<div id="htmlPreview" class="w-100 d-none">Preview HTML File</div>
								</div>
							</div>
							<canvas id="thumbnailCanvas" class="d-none"></canvas>
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Thumbnail</label>
							    <div class="col-sm-9">
									<input type="file" class="form-control" name="thumbFile" id="thumbFile" onchange="angular.element(this).scope().previewFile(this)"  ng-class="{ 'is-invalid' : objectForm.thumbFile.$invalid && !objectForm.thumbFile.$pristine }">
									<small ng-show="objectForm.thumbFile.$invalid && !objectForm.thumbFile.$pristine" class="text-danger"> &nbsp field Thumbnail is required </small>
									<small id="thumbFileInvalidMessage" ng-show="objectForm.thumbFile.$invalid && !objectForm.thumbFile.$pristine" class="text-danger"></small>
								</div>
							</div>
							<div class="form-group row">
								<label class="col-sm-3 col-form-label"></label>
							    <div class="col-sm-9">
									<img id="thumbPreview" ng-src="{{formData.thumbUrl}}" alt="Thumbnail Preview" class="d-none" style="width:100px">
								</div>
							</div>
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Name</label>
							    <div class="col-sm-9">
									<input type="text" class="form-control" name="name" ng-model="formData.name" ng-class="{ 'is-invalid' : objectForm.name.$invalid && !objectForm.name.$pristine }" required>
									<small ng-show="objectForm.name.$invalid && !objectForm.name.$pristine  && objectForm.name.$viewValue==''" class="text-danger"> &nbsp field Name is required </small>
									<small id="nameInvalidMessage" ng-show="objectForm.name.$invalid && !objectForm.name.$pristine" class="text-danger"></small>									
								</div>
							</div>
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Verified</label>
								<div class="col-sm-9">
									<select type="text" class="form-control" name="verified" ng-model="formData.verified" ng-class="{ 'is-invalid' : objectForm.verified.$invalid && !objectForm.verified.$pristine }" required>
										<option value="true" ng-selected="formData.verified == true">true</option>
										<option value="false" ng-selected="formData.verified == false">false</option>
									</select>
									<small ng-show="objectForm.verified.$invalid && !objectForm.verified.$pristine" class="text-danger"> &nbsp field Verified is required </small>
									<small id="verifiedInvalidMessage" ng-show="objectForm.verified.$invalid && !objectForm.verified.$pristine" class="text-danger"></small>
								</div> 
							</div>
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Category</label>
							    <div class="col-sm-9">
									<select type="text" class="form-control" name="category" ng-model="formData.category" ng-class="{ 'is-invalid' : objectForm.category.$invalid && !objectForm.category.$pristine }" required>
										<option ng-repeat="category in mediaCategories" ng-value="category.name" ng-selected="formData.category==category.name">{{category.name}}</option>
									</select>
									<small ng-show="objectForm.category.$invalid && !objectForm.category.$pristine" class="text-danger"> &nbsp field Category is required </small>
									<small id="categoryInvalidMessage" ng-show="objectForm.category.$invalid && !objectForm.category.$pristine" class="text-danger"></small>
								</div>
							</div>							
							
							
						</div>
						
						<!-- case of a Account -->
						<div ng-if="targetObject=='account'">
						
							<div class="form-group row" >
								<label class="col-sm-3 col-form-label">User Name</label>
							    <div class="col-sm-9">
						            <input type="text" name="userName" class="form-control" placeholder="Email address" ng-model="formData.userName" ng-class="{ 'is-invalid' : objectForm.userName.$invalid && !objectForm.userName.$pristine }" required>
						            <!-- <small ng-show="objectForm.userName.$invalid && !objectForm.userName.$pristine && (objectForm.userName.$error.email || objectForm.userName.$error.required) " class="text-danger"> &nbsp please enter a valid email </small> -->
					 	            <small id="userNameInvalidMessage" ng-show="objectForm.userName.$invalid && !objectForm.userName.$pristine" class="text-danger"></small>
				 	            </div>
					        </div>
					        
							<div class="form-group row" >
								<label class="col-sm-3 col-form-label">First Name</label>
								<div class="col-sm-9">
						            <input type="text" name="firstName" class="form-control" placeholder="First name" ng-model="formData.firstName" ng-class="{ 'is-invalid' : objectForm.firstName.$invalid && !objectForm.firstName.$pristine }" required>
						            <small ng-show="objectForm.firstName.$invalid && !objectForm.firstName.$pristine" class="text-danger"> &nbsp your First name is required </small>
						            <small id="firstNameInvalidMessage" ng-show="objectForm.firstName.$invalid && !objectForm.firstName.$pristine" class="text-danger"></small>
					           	</div>
				   	        </div>
				   	        
							<div class="form-group row" >
								<label class="col-sm-3 col-form-label">Last Name</label>
							    <div class="col-sm-9">
						            <input type="text" name="lastName" class="form-control" placeholder="Last name" ng-model="formData.lastName" ng-class="{ 'is-invalid' : objectForm.lastName.$invalid && !objectForm.lastName.$pristine }" required>
						            <small ng-show="objectForm.lastName.$invalid && !objectForm.lastName.$pristine" class="text-danger"> &nbsp your last name is required </small>
						            <small id="lastNameInvalidMessage" ng-show="objectForm.lastName.$invalid && !objectForm.lastName.$pristine" class="text-danger"></small>
					   	        </div>
							</div>
				
					        <div class="form-group row" >
								<label class="col-sm-3 col-form-label">Password</label>
								<div class="col-md-8" >
						            <input type="password" name="password" class="form-control" placeholder="{{isCreateModalType ? 'Password' : '********'}}" ng-model="formData.password" ng-minlength="8" ng-maxlength="20" ng-class="{ 'is-invalid' : objectForm.password.$invalid && !objectForm.password.$pristine }" ng-required="isCreateModalType">
						            <small ng-show="objectForm.password.$error.required && !objectForm.password.$pristine" class="text-danger">&nbsp a password is required </small>
								    <!-- <small ng-show="!objectForm.password.$error.required && !objectForm.password.$error.minlength && !objectForm.password.$error.maxlength && objectForm.password.$error.pattern && !objectForm.password.$pristine" class="text-danger">&nbsp must contain one lower &amp; uppercase letter, and one number </small> -->
								    <small ng-show="!objectForm.password.$error.required && (objectForm.password.$error.minlength || objectForm.password.$error.maxlength) && !objectForm.password.$pristine" class="text-danger">&nbsp password must be between 8 and 20 characters </small>
							    </div>
							</div>
							<div class="form-group row" >
								<label class="col-sm-3 col-form-label">Confirm Password</label>
								<div class="col-md-8" >
									<input type="password" name="confirmPassword" class="form-control" placeholder="{{isCreateModalType ? 'Confirm Password' : '********'}}" ng-model="formData.confirmPassword" ng-class="{ 'is-invalid' : objectForm.confirmPassword.$invalid && !objectForm.confirmPassword.$pristine }" match-password="objectForm.password" ng-required="isCreateModalType">
						            <small ng-show="objectForm.confirmPassword.$error.required && !objectForm.confirmPassword.$pristine" class="text-danger"> &nbsp please confirm your password </small>
						            <small ng-show="!objectForm.confirmPassword.$error.required && objectForm.confirmPassword.$error.matchPassword && !objectForm.confirmPassword.$pristine" class="text-danger">&nbsp passwords should match.</small>								
								</div>
					        </div>
					        				
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">User Role</label>
								<div class="col-sm-9">
									<select type="text" class="form-control" name="userRole" ng-model="formData.userRole" ng-class="{ 'is-invalid' : objectForm.userRole.$invalid && !objectForm.userRole.$pristine }" required>
										<option value="" disabled selected >-- select an option --</option>
										<option value="ROLE_ADMIN" ng-selected="formData.userRole == 'ROLE_ADMIN'">Admin</option>
										<option value="ROLE_CLIENT" ng-selected="formData.userRole == 'ROLE_CLIENT'">Client</option>
										<option value="ROLE_PARTNER" ng-selected="formData.userRole == 'ROLE_PARTNER'">Partner</option>
										<option value="ROLE_MACHINE" ng-selected="formData.userRole == 'ROLE_MACHINE'">Machine</option>
									</select>
									<small ng-show="objectForm.userRole.$invalid && !objectForm.userRole.$pristine" class="text-danger"> &nbsp field User Role is required </small>
									<small id="userRoleInvalidMessage" ng-show="objectForm.userRole.$invalid && !objectForm.userRole.$pristine" class="text-danger"></small>
								</div> 
							</div>
							
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Active</label>
								<div class="col-sm-9">
									<select type="text" class="form-control" name="active" ng-model="formData.active" ng-class="{ 'is-invalid' : objectForm.active.$invalid && !objectForm.active.$pristine }" required>
										<option value="" disabled selected >-- select an option --</option>
										<option value="true" ng-selected="formData.active == true">true</option>
										<option value="false" ng-selected="formData.active == false">false</option>
									</select>
									<small ng-show="objectForm.active.$invalid && !objectForm.active.$pristine" class="text-danger"> &nbsp field Verified is required </small>
									<small id="activeInvalidMessage" ng-show="objectForm.active.$invalid && !objectForm.active.$pristine" class="text-danger"></small>
								</div> 
							</div>
							
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Conditions Accepted</label>
								<div class="col-sm-9">
									<select type="text" class="form-control" name="conditionsAccepted" ng-model="formData.conditionsAccepted" ng-class="{ 'is-invalid' : objectForm.conditionsAccepted.$invalid && !objectForm.conditionsAccepted.$pristine }" required>
										<option value="" disabled selected >-- select an option --</option>
										<option value="true" ng-selected="formData.conditionsAccepted == true">true</option>
										<option value="false" ng-selected="formData.conditionsAccepted == false">false</option>
									</select>
									<small ng-show="objectForm.conditionsAccepted.$invalid && !objectForm.conditionsAccepted.$pristine" class="text-danger"> &nbsp field Verified is required </small>
									<small id="conditionsAcceptedInvalidMessage" ng-show="objectForm.conditionsAccepted.$invalid && !objectForm.conditionsAccepted.$pristine" class="text-danger"></small>
								</div> 
							</div>

						</div>
						
						<!-- case of a Bill -->
						<div ng-if="targetObject=='bill'">
						
							<div class="form-group row" >
								<label class="col-sm-3 col-form-label">Bill Type</label>
								<div class="col-sm-9">
									<select type="text" class="form-control" name="type" ng-model="formData.type" required>
										<option value="" disabled selected >-- select an option --</option>
										<option value="Client Bill" ng-selected="formData.type == 'Client Bill'">Client Bill</option>
										<option value="Partner Bill" ng-selected="formData.type == 'Partner Bill'">Partner Bill</option>
									</select>
									<small id="typeInvalidMessage" ng-show="objectForm.type.$invalid && !objectForm.type.$pristine" class="text-danger"></small>
					           	</div>
				   	        </div>
						
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Name</label>
							    <div class="col-sm-9">
									<input type="text" class="form-control" name="name" ng-model="formData.name" ng-class="{ 'is-invalid' : objectForm.name.$invalid && !objectForm.name.$pristine }" required>
									<small ng-show="objectForm.name.$invalid && !objectForm.name.$pristine  && objectForm.name.$viewValue==''" class="text-danger"> &nbsp field Name is required </small>
									<small id="nameInvalidMessage" ng-show="objectForm.name.$invalid && !objectForm.name.$pristine" class="text-danger"></small>									
								</div>
							</div>
				   	        
							<div class="form-group row" ng-if="formData.type == 'Client Bill'">
								<label class="col-sm-3 col-form-label">Media Id</label>
								<div class="col-sm-9">
									<input type="text" class="form-control" name="mediaId" ng-model="formData.mediaId" ng-pattern="/^[0-9]*$/" ng-class="{ 'is-invalid' : objectForm.mediaId.$invalid && !objectForm.mediaId.$pristine }" 
									ng-required="formData.type == 'Client Bill'" ng-change="formData.displayId = ''">
									<small ng-show="!objectForm.mediaId.$error.required  && objectForm.mediaId.$error.pattern && !objectForm.mediaId.$pristine" class="text-danger">&nbsp field CPM must be a number </small>
									<small id="mediaIdInvalidMessage" ng-show="objectForm.mediaId.$invalid && !objectForm.mediaId.$pristine" class="text-danger"></small>				
					           	</div>
				   	        </div>
				   	        
				   	        <div class="form-group row" ng-if="formData.type == 'Partner Bill'">
								<label class="col-sm-3 col-form-label">Display Id</label>
								<div class="col-sm-9">
									<input type="text" class="form-control" name="displayId" ng-model="formData.displayId" ng-pattern="/^[0-9]*$/" ng-class="{ 'is-invalid' : objectForm.displayId.$invalid && !objectForm.displayId.$pristine }" 
									ng-required="formData.type == 'Partner Bill'" ng-change="formData.mediaId = ''">
									<small ng-show="!objectForm.displayId.$error.required  && objectForm.displayId.$error.pattern && !objectForm.displayId.$pristine" class="text-danger">&nbsp field CPM must be a number </small>
									<small id="displayIdInvalidMessage" ng-show="objectForm.displayId.$invalid && !objectForm.displayId.$pristine" class="text-danger"></small>				
					           	</div>
				   	        </div>
					        
							<div class="form-group row" >
								<label class="col-sm-3 col-form-label">Start Time</label>
								<div class="col-sm-9 input-append date form_datetime row">
									<div class="col-sm-9 pr-0">
										<input type="text" name="startTime" class="form-control form-control-sm small mt-1 " readonly  placeholder="yyyy-mm-dd hh:mm" ng-model="formData.startTime" required>
									</div>
									<div class="col-sm-3 p-1">
										<div class="mt-1">
											<span class="add-on"><i class="icon-remove fa fa-remove"></i></span>
	    									<span class="add-on"><i class="icon-calendar fa fa-calendar"></i></span>
										</div>
	    							</div>
	    							<small id="startTimeInvalidMessage" ng-show="objectForm.startTime.$invalid && !objectForm.startTime.$pristine" class="text-danger"></small>
					           	</div>
				   	        </div>
				   	        
							<div class="form-group row" >
								<label class="col-sm-3 col-form-label">End Time</label>
								<div class="col-sm-9 input-append date form_datetime row">
									<div class="col-sm-9 pr-0">
										<input type="text" name="endTime" class="form-control form-control-sm small mt-1 " readonly  placeholder="yyyy-mm-dd hh:mm" ng-model="formData.endTime" required>
									</div>
									<div class="col-sm-3 p-1">
										<div class="mt-1">
											<span class="add-on"><i class="icon-remove fa fa-remove"></i></span>
	    									<span class="add-on"><i class="icon-calendar fa fa-calendar"></i></span>
										</div>
	    							</div>
	    							<small id="endTimeInvalidMessage" ng-show="objectForm.endTime.$invalid && !objectForm.endTime.$pristine" class="text-danger"></small>
					           	</div>
				   	        </div>
				   	  
							<div class="form-group row" >
								<label class="col-sm-3 col-form-label">CPM</label>
								<div class="col-sm-9">
									<input type="text" class="form-control" name="cpm" ng-model="formData.cpm" ng-pattern="/^[0-9]{1,7}(\.[0-9]+)?$/" ng-class="{ 'is-invalid' : objectForm.cpm.$invalid && !objectForm.cpm.$pristine }" required>
									<small ng-show="objectForm.cpm.$error.required && !objectForm.cpm.$pristine" class="text-danger"> &nbsp field CPM is required </small>
									<small ng-show="!objectForm.cpm.$error.required  && objectForm.cpm.$error.pattern && !objectForm.cpm.$pristine" class="text-danger">&nbsp field CPM must be a decimal </small>
									<small id="cpmInvalidMessage" ng-show="objectForm.cpm.$invalid && !objectForm.cpm.$pristine" class="text-danger"></small>				
					           	</div>
				   	        </div>
				   	        
				   	        <div class="form-group row" >
								<label class="col-sm-3 col-form-label">Average Attention Rate (optional override)</label>
								<div class="col-sm-9">
									<input type="text" class="form-control" name="averageAttentionRate" ng-model="formData.averageAttentionRate" ng-pattern="/^[0-9]{1,7}(\.[0-9]+)?$/" ng-class="{ 'is-invalid' : objectForm.averageAttentionRate.$invalid && !objectForm.averageAttentionRate.$pristine }">
									<small ng-show="!objectForm.averageAttentionRate.$error.required  && objectForm.averageAttentionRate.$error.pattern && !objectForm.averageAttentionRate.$pristine" class="text-danger">&nbsp field Average Attention Rate must be a decimal </small>
									<small id="averageAttentionRateInvalidMessage" ng-show="objectForm.averageAttentionRate.$invalid && !objectForm.averageAttentionRate.$pristine" class="text-danger"></small>
					           	</div>
				   	        </div>
							
						</div>

				</div>
												
				<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
						<button id="createEditObjectModalAction" ng-click="isCreateModalType ? createTargetObject() : updateTargetObject()" type="button" class="btn btn-primary" ng-disabled="objectForm.$invalid ">{{isCreateModalType ? 'Create' : 'Update'}}</button>
				</div>
				</form>	
																									
			</div>
		</div>
	</div>


	<!-- VIEW/DELETE an object modal -->
	<div class="modal fade" id="viewDeleteObjectModal" tabindex="-1" role="dialog" aria-labelledby="viewDeleteObjectModal" aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="viewDeleteObjectModalLabel">{{isDeleteModalType ? 'Delete' : 'View'}} {{targetObject}}</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div id="viewDeleteObjectModalBody" class="modal-body">
					<p ng-if="isDeleteModalType" class="modal-title" id="exampleModalLabel">Are your sure you want to delete that {{targetObject}}?</p>
					<br>

					<!-- AUTOMATIC form fields for each object -->
					<!-- ------------------------------------- -->
						
					<div ng-repeat="field in schema" ng-if="targetObject!='media' && targetObject!='account' && targetObject!='bill' " class="form-group row">
						<label ng-if="['String','boolean', 'int', 'Long', 'Double', 'BigDecimal', 'Date', 'LocalTime'].includes(field.type)" 
							class="col-sm-3 col-form-label">{{field.title}}</label>
						<div ng-if="['String','boolean', 'int', 'Long', 'Double', 'BigDecimal', 'Date', 'LocalTime'].includes(field.type)" 
							class="col-sm-9">
							<div class="form-control">{{formData[field.name]}}</div>
						</div>
					</div>
					
						<!-- add COMPLEX SCHEMA RELATED specific form fields here -->
						<!-- -------------------------------------------- -->
						
						<!-- case of a Playlist -->
						<div ng-repeat="field in schema" ng-if="targetObject=='playlist'">
							<div  ng-if="field.name=='spots'" >
								<div  class="form-group row" >
									 <label  class="col-sm-3 col-form-label">Selected Spots</label>
								</div>
								<div  class="form-group row" >
									 <div class="col-sm-12">
									 	<div ui-grid="viewSelectedSpotsGrid" class="grid small" ui-grid-pagination ui-grid-selection ui-grid-edit ></div>						 		
									 </div>
								</div>
							</div>						
						</div>
						
						<!-- case of a Program -->
						<div ng-repeat="field in schema" ng-if="targetObject=='program'">
							<div  ng-if="field.name=='displays'">
								<div  class="form-group row" >
									 <label class="col-sm-3 col-form-label">Selected Displays</label>
								</div>
								<div  class="form-group row" >
									 <div class="col-sm-12">
									 	<div ui-grid="viewSelectedDisplaysGrid" class="grid small" ui-grid-pagination ui-grid-selection ></div>						 		
									 </div>
								</div>
							</div>						
							
							<div  ng-if="field.name=='playlists'">
								<div  class="form-group row" >
									 <label class="col-sm-3 col-form-label">Selected Playlists</label>
								</div>
								<div  class="form-group row" >
									 <div class="col-sm-12">
									 	<div ui-grid="viewSelectedPlaylistsGrid" class="grid small" ui-grid-pagination ui-grid-selection ></div>						 		
									 </div>				 	
								</div>
							</div>
						</div>						


					<!-- add MANUALLY SET specific form fields here -->
					<!-- ------------------------------------------ -->
							
					<!-- case of a Media -->
					<div ng-if="targetObject=='media'">
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Id</label>
							    <div class="col-sm-9">
									<div class="form-control">{{formData.id}}</div>
								</div>
							</div>
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Preview</label>
							</div>
							<div class="form-group row">						
							    <div class="col-sm-12">
									<img id="imagePreview" ng-src="{{formData.type=='Image' ? formData.url :''}}" onload="angular.element(this).scope().generateThumbFile(this)" alt="Image Preview" class="w-100 d-none">
									<video id="videoPreview" ng-src="{{formData.type=='Video' ? formData.url :''}}" ontimeupdate="angular.element(this).scope().generateThumbFile(this)" alt="Video Preview" class="w-100 d-none" controls></video>
									<audio id="audioPreview" ng-src="{{formData.type=='Audio' ? formData.url :''}}" alt="Audio Preview" class="w-100 d-none" controls></audio>
									<div id="htmlPreview" class="w-100 d-none">Preview HTML File</div>
								</div>
							</div>
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Thumbnail</label>
							    <div class="col-sm-9">
									<img id="thumbPreview" ng-src="{{formData.thumbUrl}}" alt="Thumbnail Preview" class="d-none" style="width:100px">
								</div>
							</div>
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Name</label>
							    <div class="col-sm-9">
									<div class="form-control">{{formData.name}}</div>
								</div>
							</div>
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Verified</label>
								<div class="col-sm-9">
									<div class="form-control">{{formData.verified}}</div>
								</div> 
							</div>
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Category</label>
							    <div class="col-sm-9">
									<div class="form-control">{{formData.category}}</div>
								</div>
							</div>
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Download Media File</label>
							    <div class="col-sm-9">
									<a href="{{formData.url}}" download="media_{{formData.id}}_{{formData.name}}" class="btn btn-block btn-success float-left">
											<i class="fa fa-download"></i>&nbsp; Download file
									</a>
								</div>
							</div>						
					</div>						
					
						<!-- case of a Account -->
						<div ng-if="targetObject=='account'">
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Id</label>
							    <div class="col-sm-9">
									<div class="form-control">{{formData.id}}</div>
								</div>
							</div>
							
							<div class="form-group row" >
								<label class="col-sm-3 col-form-label">User Name</label>
							    <div class="col-sm-9">
							    	<div class="form-control">{{formData.userName}}</div>
				 	            </div>
					        </div>
					        
							<div class="form-group row" >
								<label class="col-sm-3 col-form-label">First Name</label>
								<div class="col-sm-9">
									<div class="form-control">{{formData.firstName}}</div>
					           	</div>
				   	        </div>
				   	        
							<div class="form-group row" >
								<label class="col-sm-3 col-form-label">Last Name</label>
							    <div class="col-sm-9">
							    	<div class="form-control">{{formData.lastName}}</div>
					   	        </div>
							</div>
					        				
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">User Role</label>
								<div class="col-sm-9">
									<div class="form-control" ng-if="formData.userRole == 'ROLE_ADMIN'">Admin</div>
									<div class="form-control" ng-if="formData.userRole == 'ROLE_CLIENT'">Client</div>
									<div class="form-control" ng-if="formData.userRole == 'ROLE_PARTNER'">Partner</div>
									<div class="form-control" ng-if="formData.userRole == 'ROLE_MACHINE'">Machine</div>
								</div> 
							</div>
							
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Active</label>
								<div class="col-sm-9">
									<div class="form-control">{{formData.active}}</div>
								</div> 
							</div>
							
							<div class="form-group row">						
								<label class="col-sm-3 col-form-label">Conditions Accepted</label>
								<div class="col-sm-9">
									<div class="form-control">{{formData.conditionsAccepted}}</div>
								</div> 
							</div>

						</div>
						
						
					<!-- case of a Bill -->
					<div ng-if="targetObject=='bill'">
						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Id</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.id}}</div>
							</div>
						</div>
						
						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Name</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.name}}</div>
							</div>
						</div>

						<hr>
						<div class="form-group row">						
							<label class="col-sm-6 col-form-label font-weight-bold">Billing Parameters</label>
						</div>	
						
						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Type</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.type}}</div>
							</div>
						</div>
												
						<div class="form-group row" ng-if="formData.type == 'Client Bill'">						
							<label class="col-sm-3 col-form-label">Media Id</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.mediaId}}</div>
							</div>
						</div>						

						<div class="form-group row" ng-if="formData.type == 'Client Bill'">						
							<label class="col-sm-3 col-form-label">Media Name</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.mediaName}}</div>
							</div>
						</div>
						
						<div class="form-group row" ng-if="formData.type == 'Partner Bill'">						
							<label class="col-sm-3 col-form-label">Display Id</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.displayId}}</div>
							</div>
						</div>
						
						<div class="form-group row" ng-if="formData.type == 'Partner Bill'">						
							<label class="col-sm-3 col-form-label">Display Name</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.displayName}}</div>
							</div>
						</div>
												
						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Start Time</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.startTime}}</div>
							</div>
						</div>
						
						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">End Time</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.endTime}}</div>
							</div>
						</div>
						
						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Id</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.id}}</div>
							</div>
						</div>
						
						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">CPM</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.cpm}}</div>
							</div>
						</div>						

						<hr>
						<div class="form-group row">						
							<label class="col-sm-6 col-form-label font-weight-bold">Calculated Metrics</label>
						</div>						
						
						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Average Attention Rate</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.averageAttentionRate}}</div>
							</div>
						</div>

						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Average Display Audience</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.averageDisplayAudience}}</div>
							</div>
						</div>						
						
						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Total Displays</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.totalDisplays}}</div>
							</div>
						</div>						

						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Total Display Time</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.totalDisplayTime}}</div>
							</div>
						</div>						

						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Estimated Impressions</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.estimatedImpressions}}</div>
							</div>
						</div>		

						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Estimated Reach</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.estimatedReach}}</div>
							</div>
						</div>		

						<div class="form-group row">						
							<label class="col-sm-6 col-form-label font-weight-bold">Calculated Amount</label>
						</div>				

						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Total Amount</label>
						    <div class="col-sm-9">
								<div class="form-control">{{formData.totalAmount}}</div>
							</div>
						</div>							
							
						<hr>
						<div class="form-group row">						
							<label class="col-sm-3 col-form-label font-weight-bold">Generated Bill File</label>
						</div>		

						<div class="form-group row">						
							<label class="col-sm-3 col-form-label">Download Detailed Bill</label>
						    <div class="col-sm-9">
								<a href="{{formData.url}}" download="bill_{{formData.id}}_{{formData.name}}" class="btn btn-block btn-success float-left">
										<i class="fa fa-download"></i>&nbsp; Download file
								</a>
							</div>
						</div>						

							
					</div>
						
						
						
						
				</div>
				<div class="modal-footer">
					<button ng-click="clearFormData()" type="button" class="btn btn-secondary" data-dismiss="modal">{{isDeleteModalType ? 'Cancel' : 'Close'}}</button>
					<button ng-if="isDeleteModalType" ng-click="deleteTargetObject()" type="button" class="btn btn-danger">Delete</button>
				</div>
			</div>
		</div>
	</div>
	
	<!-- Delete selection modal -->
	<div class="modal fade" id="deleteSelectionModal" tabindex="-1">
		<div class="modal-dialog modal-sm" >
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="deleteSelectionModalLabel">Delete Selection</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div id="deleteSelectionModalBody" class="modal-body">
					<p class="modal-title" id="exampleModalLabel">Are your sure you want to delete the selected {{targetObject}}s?</p>
				</div>
				<div class="modal-footer">
					<button ng-click="" type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
					<button ng-click="deleteSelection()" type="button" class="btn btn-danger">Delete Selection</button>
				</div>
			</div>
		</div>
	</div>